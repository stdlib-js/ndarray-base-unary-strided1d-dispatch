// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.2-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-is-data-type@v0.2.1-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-output-data-type-policy@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-contains@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-unary-strided1d@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-unary-output-dtype@v0.2.2-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@v0.2.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ndims@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-order@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-empty@v0.3.0-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-zero-to@v0.2.1-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-every-by@v0.2.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/object-assign@v0.2.2-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import{primitives as x}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@v0.2.2-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-empty-collection@v0.2.2-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-unique-normalized-indices@esm/index.mjs";var _={dims:null};function V(t,e,s,r){var i;if(!c(r))return new TypeError(b("null2V",r));if(w(r,"dims")){if(t.dims=r.dims,!x(t.dims)&&!E(t.dims))return new TypeError(b("invalid option. `%s` option must be an array of integers. Option: `%s`.","dims",t.dims));if(null===(i=T(t.dims,e-1)))return new RangeError(b("invalid option. `%s` option contains an out-of-bounds dimension index. Option: [%s].","dims",f(t.dims,",")));if(i.length!==t.dims.length)return new Error(b("invalid option. `%s` option contains duplicate indices. Option: [%s].","dims",f(t.dims,",")));t.dims=i}return w(r,"dtype")&&(t.dtype=r.dtype,!o(s,t.dtype))?new TypeError(b("null4S","dtype",f(s,'", "'),t.dtype)):null}function k(t,e,o,a){var m,p;if(!(this instanceof k))return new k(t,e,o,a);if(!s(t))throw new TypeError(b("null3L",t));if(!r(t.default))throw new TypeError(b('invalid argument. First argument must be an object having a "default" property and an associated method.'));if(!i(e))throw new TypeError(b("null2y",e));for(p=0;p<e.length;p++)if(m=e[p],!i(m)||m.length<1||!v(m,n))throw new TypeError(b("invalid argument. Second argument must contain arrays of data types. Value: `%s`.",e));if(!i(o)||o.length<1||!v(o,n))throw new TypeError(b("invalid argument. Third argument must be an array of data types. Value: `%s`.",o));if(!d(a))throw new TypeError(b("invalid argument. Fourth argument must be a supported output data type policy. Value: `%s`.",a));return this._table=t,this._idtypes=e,this._odtypes=o,this._policy=a,this}t(k.prototype,"apply",(function(t){var s,r,i,n,d,l,v,c,w,x,E,T;if(r=arguments.length,!e(t))throw new TypeError(b("null5t",t));if(c=h(t),!o(this._idtypes[0],c))throw new TypeError(b('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',f(this._idtypes[0],'", "'),c));for(i=[t],T=1;T<r&&e(v=arguments[T]);T++){if(c=h(v),!o(this._idtypes[T],c))throw new TypeError(b('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',T,f(this._idtypes[T],'", "'),c));i.push(v)}if(T<r-1)throw new TypeError(b("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",T,arguments[T]));if(x=(l=p(t)).length,n=g({},_),r>T&&(s=arguments[r-1],d=V(n,x,this._odtypes,s)))throw d;return null===n.dims&&(n.dims=j(x)),E=u(l,{dtype:n.dtype||m(c,this._policy),order:y(t)}),w=this._table[c]||this._table.default,i.push(E),a(w,i,n.dims),E})),t(k.prototype,"assign",(function(t){var s,r,i,n,d,m,p,y,u,v,c,w;if(r=arguments.length,!e(t))throw new TypeError(b("null5t",t));if(u=h(t),!o(this._idtypes[0],u))throw new TypeError(b('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',f(this._idtypes[0],'", "'),u));for(n=[t],w=1;w<r&&e(d=arguments[w]);w++)n.push(d);if(w<2)throw new TypeError(b("invalid argument. Second argument must be an ndarray-like object. Value: `%s`.",arguments[1]));if(w===r-1)s=arguments[w],y=!0;else if(w<r-1)throw new TypeError(b("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",w,arguments[w]));for(w=1;w<n.length-1;w++)if(u=h(n[w]),!o(this._idtypes[w],u))throw new TypeError(b('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',w,f(this._idtypes[w],'", "'),u));if(v=l(t),i=g({},_),y&&(m=V(i,v,this._odtypes,s)))throw m;return null===i.dims&&(i.dims=j(v)),c=this._table[u]||this._table.default,p=n[1],n[1]=n[n.length-1],n[n.length-1]=p,a(c,n,i.dims),n[1]}));export{k as default};
//# sourceMappingURL=index.mjs.map

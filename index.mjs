// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-property@v0.2.2-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.2-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-object@v0.2.2-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-empty-collection@v0.2.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function-array@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-data-type@v0.2.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-output-data-type-policy@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-input-casting-policy@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-assert-contains@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-unary-strided1d@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-unary-output-dtype@v0.2.2-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-unary-input-casting-dtype@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtypes2enums@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-shape@v0.2.2-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ndims@v0.2.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype@v0.2.2-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-order@v0.2.2-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assign@v0.1.1-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-empty@v0.3.0-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-empty@v0.3.0-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-zero-to@v0.2.1-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.1-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-copy@v0.2.2-esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-insert-at@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-every-by@v0.2.2-esm/index.mjs";import{ndarray as k}from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gindex-of-row@esm/index.mjs";import A from"https://cdn.jsdelivr.net/gh/stdlib-js/object-assign@v0.2.2-esm/index.mjs";import D from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";import O from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.2-esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.2-esm/index.mjs";import{primitives as z}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer-array@v0.2.2-esm/index.mjs";import q from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-unique-normalized-indices@esm/index.mjs";var L={dims:null};function R(t,s,e,r){var i;if(!O(r))return new TypeError(D("null2V",r));if(S(r,"dims")){if(t.dims=r.dims,!z(t.dims)&&!a(t.dims))return new TypeError(D("invalid option. `%s` option must be an array of integers. Option: `%s`.","dims",t.dims));if(null===(i=q(t.dims,s-1)))return new RangeError(D("invalid option. `%s` option contains an out-of-bounds dimension index. Option: [%s].","dims",E(t.dims,",")));if(i.length!==t.dims.length)return new Error(D("invalid option. `%s` option contains duplicate indices. Option: [%s].","dims",E(t.dims,",")));t.dims=i}return S(r,"dtype")&&(t.dtype=r.dtype,!l(e,t.dtype))?new TypeError(D("null4S","dtype",E(e,'", "'),t.dtype)):null}function B(t,e,l,y,u){var f,c;if(!(this instanceof B))return arguments.length>4?new B(t,e,l,y,u):new B(t,e,l,y);if(!r(t))throw new TypeError(D("null3L",t));if(!i(t.default))throw new TypeError(D('invalid argument. First argument must be an object having a "default" property and an associated method.'));if(s(t,"types")&&!n(t.types)&&!a(t.types))throw new TypeError(D('invalid argument. First argument must be an object having a "types" property whose associated value is an array-like object.'));if(s(t,"fcns")&&!d(t.fcns)&&!a(t.fcns))throw new TypeError(D('invalid argument. First argument must be an object having a "fcns" property whose associated value is an array-like object containing functions.'));if(!n(e))throw new TypeError(D("null2y",e));for(c=0;c<e.length;c++)if(f=e[c],!n(f)||f.length<1||!V(f,o))throw new TypeError(D("invalid argument. Second argument must contain arrays of data types. Value: `%s`.",e));if(!n(l)||l.length<1||!V(l,o))throw new TypeError(D("invalid argument. Third argument must be an array of data types. Value: `%s`.",l));if(!r(y))throw new TypeError(D("null43",y));if(!m(y.output))throw new TypeError(D("invalid argument. Fourth argument must be an object having a supported output data type policy. Value: `%s`.",y.output));if(!p(y.casting))throw new TypeError(D("invalid argument. Fourth argument must be an object having a supported casting policy. Value: `%s`.",y.casting));if(this._table={default:t.default,types:t.types?j(t.types):[],fcns:t.fcns?T(t.fcns):[]},this._table.types.length!==2*this._table.fcns.length)throw new Error("invalid argument. First argument specifies an unexpected number of types. A pair of input and output ndarray data types must be specified for each provided strided function.");return this._idtypes=e,this._odtypes=l,this._policies={output:y.output,casting:y.casting},this._apply=arguments.length>4?h.factory(u):h,this}t(B.prototype,"apply",(function(t){var s,r,i,n,a,d,o,m,p,h,c,T,V,O,S;if(r=arguments.length,!e(t))throw new TypeError(D("null5t",t));if(m=g(t),!l(this._idtypes[0],m))throw new TypeError(D('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',E(this._idtypes[0],'", "'),m));for(i=[t],S=1;S<r&&e(o=arguments[S]);S++){if(c=g(o),!l(this._idtypes[S],c))throw new TypeError(D('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',S,E(this._idtypes[S],'", "'),c));i.push(o)}if(S<r-1)throw new TypeError(D("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",S,arguments[S]));if(V=(d=f(t)).length,n=A({},L),r>S&&(s=arguments[r-1],a=R(n,V,this._odtypes,s)))throw a;return null===n.dims&&(n.dims=_(V)),p=n.dtype||y(m,this._policies.output),O=x(d,{dtype:p,order:v(t)}),m!==(c=u(m,p,this._policies.casting))&&(h=w(c,d,v(t)),b([t,h]),i[0]=h,m=c),T=(S=k(this._table.fcns.length,2,this._table.types,2,1,0,j([m,p]),1,0))>=0?this._table.fcns[S]:this._table.default,this._apply(T,F(i,1,O),n.dims),O})),t(B.prototype,"assign",(function t(s){var r,i,n,a,d,o,m,p,h,y,b,x,T,V,O;if(i=arguments.length,!e(s))throw new TypeError(D("null5t",s));if(p=g(s),!l(this._idtypes[0],p))throw new TypeError(D('invalid argument. First argument must have one of the following data types: "%s". Data type: `%s`.',E(this._idtypes[0],'", "'),p));for(a=[s],O=1;O<i&&e(d=arguments[O]);O++)a.push(d);if(O<2)throw new TypeError(D("invalid argument. Second argument must be an ndarray-like object. Value: `%s`.",arguments[1]));if(O===i-1)r=arguments[O],m=!0;else if(O<i-1)throw new TypeError(D("invalid argument. Argument %d must be an ndarray-like object. Value: `%s`.",O,arguments[O]));for(V=a.pop(),O=1;O<a.length;O++)if(b=g(a[O]),!l(this._idtypes[O],b))throw new TypeError(D('invalid argument. Argument %d must have one of the following data types: "%s". Data type: `%s`.',O,E(this._idtypes[O],'", "'),b));if(x=c(s),n=A({},L),m&&(o=R(n,x,this._odtypes,r)))throw o;return null===n.dims&&(n.dims=_(x)),h=g(V),p!==(b=u(p,h,this._policies.casting))&&(t([s,y=w(b,f(s),v(s))]),a[0]=y,p=b),T=(O=k(this._table.fcns.length,2,this._table.types,2,1,0,j([p,h]),1,0))>=0?this._table.fcns[O]:this._table.default,this._apply(T,F(a,1,V),n.dims),V}));export{B as default};
//# sourceMappingURL=index.mjs.map
